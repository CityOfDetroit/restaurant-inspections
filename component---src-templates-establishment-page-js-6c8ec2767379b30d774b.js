(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{143:function(e,t,a){"use strict";a.r(t);a(255);var n=a(0),r=a.n(n),o=(a(157),a(632)),i=a(623),l=a(624),s=a(628),c=a(634),d=a(251),m=a(633),u=a(618),p=a(627),h=a(629),y=a(7),f=a.n(y),E=a(256),v=a(630),g=a(626),b=a(292),C=a.n(b),w=a(357),x=function(e){var t=e.data;return r.a.createElement(g.a,null,r.a.createElement(g.a.Content,null,r.a.createElement(o.a,{as:"h5"},"Code ",t.violationCode),r.a.createElement(g.a.Meta,null,t.itemDescription," ",C.a.lowerCase(t.subItem)," ",C.a.lowerCase(t.problemDescription)," ",C.a.lowerCase(t.subProblem),r.a.createElement(c.a,{wide:!0,size:"tiny",trigger:r.a.createElement(d.a,{circular:!0,name:"plus",size:"small",color:"grey"}),header:"Full food code definition:",content:t.violationDescription})),r.a.createElement(g.a.Extra,null,r.a.createElement(w.a,{color:"Priority"===t.violationType?"red":"Foundation"===t.violationType?"orange":"yellow"},"Foundation"===t.violationType?"Priority Foundation":t.violationType),r.a.createElement(w.a,null,r.a.createElement(d.a,{name:"Yes"===t.corrected?"check":"No"===t.corrected?"times":"ban",color:"Yes"===t.corrected?"green":"No"===t.corrected?"red":"grey"}),"Yes"===t.corrected?"Corrected on "+Object(E.format)(t.correctedDate,"M-D-YY"):"No"===t.corrected?"Not corrected":t.corrected))))},k={outcomes:{Yes:"An establishment is compliant when zero Priority or Priority Foundation violations are cited or when all Priority and Priority violations are corrected.",No:"An establishment is not compliant when Priority or Priority Foundation violations are not corrected."},violations:{Priority:"Priority violations are the most serious category and directly contribute to foodborne illness or food poisoning. Examples include ...",Foundation:"Priority Foundation violations are the second most serious category and indirectly contribute to foodborne illness or food poisoning. Examples include not having a food product thermometer or no paper towel at the hand sink.",Core:"Core violations are the least serious category and do not significantly contribute to foodborne illness or food poisoning, but are violations of other legal requirements. Examples include a dirty floor or a dirty dumpster area."},risks:{High:"Complexity level is based on an establishment's food preparation; more complex food preparation increases risk and results in a more frequent review schedule. High indicates very complex food preparation, such as full service restaurants.",Medium:"Complexity level is based on an establishment's food preparation; more complex food preparation increases risk and results in a more frequent review schedule. Medium indicates moderately complex food preparation, such as hamburger fast food chains and bars that serve food.",Low:"Complexity level is based on an establishment's food preparation; more complex food preparation increases risk and results in a more frequent review schedule. Low indicates very limited food preparation, such as a coffee shops or bars that only serve beverages.",null:"Complexity level is based on an establishment's food preparation; more complex food preparation increases risk and results in a more frequent review schedule. This is a new field that is in the process of being updated by the Detroit Health Department."},inspections:{"Routine inspection":"",Complaint:"","Pre-opening / Plan review":""},establishments:"This data includes restaurants and other food service establishments, like school cafeterias or stadium concessions, that are inspected by the Detroit Health Department (DHD). Grocery stores, convenience stores, and other packaged and raw food establishments are inspected by the Michigan Department of Agriculture and Rural Development (MDARD) and are not included here.",disclaimer:"If a restaurant, bar, or other food service establishment that prepares or serves food and beverages in Detroit is not found in this data, please email foodsafety@detroitmi.gov or call 313-876-0135 for follow up. Please include the name and address of the establishment, and the date and time of your visit in your message.",foodCodeLink:"https://www.michigan.gov/documents/mdard/MI_Modified_2009_Food_Code_396675_7.pdf",contact:"foodsafety@detroitmi.gov"},D=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).state={activeIndex:null},t.handleClick=function(e,a){var n=a.index,r=t.state.activeIndex===n?-1:n;t.setState({activeIndex:r})},t}return f()(t,e),t.prototype.render=function(){var e=this,t=this.state.activeIndex;return r.a.createElement(v.a,{fluid:!0,styled:!0},this.props.data.map(function(a,n){return r.a.createElement("div",{key:n},r.a.createElement(v.a.Title,{active:t===n,index:n,onClick:e.handleClick,style:{display:"flex",flexDirection:"vertical",justifyContent:"space-between",alignItems:"center"}},r.a.createElement(o.a,{as:"h4"},Object(E.format)(a.inspectionDate,"M-D-YYYY"),r.a.createElement(o.a.Subheader,null,a.inspectionType+" ",r.a.createElement(d.a,{name:"Yes"===a.inCompliance?"check":"No"===a.inCompliance?"times":null,color:"Yes"===a.inCompliance?"green":"red"}))),r.a.createElement(d.a,{name:"dropdown"})),r.a.createElement(v.a.Content,{active:t===n},r.a.createElement(s.a,{basic:"very",celled:!0},r.a.createElement(s.a.Body,null,r.a.createElement(s.a.Row,{className:"Yes"===a.inCompliance?"positive":"No"===a.inCompliance?"negative":""},r.a.createElement(s.a.Cell,null,r.a.createElement("strong",null,"Outcome")),r.a.createElement(s.a.Cell,null,"Yes"===a.inCompliance?"Compliant":"No"===a.inCompliance?"Not compliant":a.inCompliance,r.a.createElement("span",{style:{marginLeft:".5em"}},r.a.createElement(c.a,{wide:!0,size:"tiny",trigger:r.a.createElement(d.a,{circular:!0,name:"question",size:"small",color:"grey"})},k.outcomes[""+a.inCompliance])))))),r.a.createElement(o.a,{as:"h5"},a.violationsByInspectionidList.length," ",1===a.violationsByInspectionidList.length?"violation":"violations"," cited ",a.violationsByInspectionidList.length>0?":":null),a.violationsByInspectionidList.length>0?r.a.createElement(g.a.Group,{divided:!0,verticalAlign:"middle"},a.violationsByInspectionidList.map(function(e,t){return r.a.createElement(x,{data:e,key:t})})):""))}))},t}(n.Component),q=a(189);a.d(t,"query",function(){return P});t.default=function(e){var t=e.data.postgres.establishment[0],a={type:"Feature",geometry:t.geojson.geometry,properties:{"marker-symbol":"restaurant","marker-color":"#ace","fill-opacity":.8}},n=encodeURIComponent(JSON.stringify(a));return r.a.createElement(q.a,null,r.a.createElement(o.a,{as:"h2"},t.name,r.a.createElement(o.a.Subheader,null,t.address)),r.a.createElement(i.a,null),r.a.createElement(l.a,{fluid:!0},r.a.createElement(o.a,{as:"h3"},t.establishmentType),r.a.createElement(s.a,{basic:"very",celled:!0,striped:!0},r.a.createElement(s.a.Body,null,r.a.createElement(s.a.Row,{className:"Open"===t.establishmentStatus?"positive":""},r.a.createElement(s.a.Cell,null,r.a.createElement("strong",null,"Status")),r.a.createElement(s.a.Cell,null,t.establishmentStatus?t.establishmentStatus:"Unknown")),r.a.createElement(s.a.Row,null,r.a.createElement(s.a.Cell,null,r.a.createElement("strong",null,"License type")),r.a.createElement(s.a.Cell,null,t.licenseType)),r.a.createElement(s.a.Row,null,r.a.createElement(s.a.Cell,null,r.a.createElement("strong",null,"State license number")),r.a.createElement(s.a.Cell,null,t.licenseNumber)),r.a.createElement(s.a.Row,null,r.a.createElement(s.a.Cell,null,r.a.createElement("strong",null,"Owner")),r.a.createElement(s.a.Cell,null,t.owner)),r.a.createElement(s.a.Row,null,r.a.createElement(s.a.Cell,null,r.a.createElement("strong",null,"Complexity level")),r.a.createElement(s.a.Cell,null,t.riskCategory?t.riskCategory:"Unknown",r.a.createElement("span",{style:{marginLeft:".5em"}},r.a.createElement(c.a,{wide:!0,size:"tiny",trigger:r.a.createElement(d.a,{circular:!0,name:"question",size:"small",color:"grey"})},k.risks[""+t.riskCategory])))),r.a.createElement(s.a.Row,null,r.a.createElement(s.a.Cell,null,r.a.createElement("strong",null,"Review frequency")),r.a.createElement(s.a.Cell,null,0===Math.round(t.reviewFrequencyDays)?"Unknown":"Every "+Math.round(t.reviewFrequencyDays)+" days"))))),r.a.createElement(i.a,null),r.a.createElement(l.a,{fluid:!0},r.a.createElement(m.a,{columns:2,stackable:!0},r.a.createElement(m.a.Row,null,r.a.createElement(m.a.Column,null,r.a.createElement(o.a,{as:"h4"},t.address,", Detroit, MI, ",t.zipcode),r.a.createElement(u.a,{rounded:!0,bordered:!0,floated:"right",src:"https://api.mapbox.com/styles/v1/jmcbroom/cjsunv74q0t5a1fmo902wmiq0/static/geojson("+n+")/"+t.coords+",16,0,0/400x250@2x?access_token=pk.eyJ1Ijoiam1jYnJvb20iLCJhIjoianRuR3B1NCJ9.cePohSx5Od4SJhMVjFuCQA"})),r.a.createElement(m.a.Column,{textAlign:"left"},r.a.createElement(o.a,{as:"h4"},"Nearby"),r.a.createElement(p.a,{link:!0,divided:!0,relaxed:!0,bordered:!0,size:"large",style:{height:275,overflowY:"scroll"}},t.nearbyList.map(function(e){return r.a.createElement(p.a.Item,{as:"a",key:e.establishmentid,href:"/establishment/"+e.establishmentid},r.a.createElement(p.a.Content,null,r.a.createElement(p.a.Header,null,e.name),r.a.createElement(p.a.Description,null,e.address)))})))))),r.a.createElement(i.a,null),r.a.createElement(l.a,{fluid:!0},r.a.createElement(o.a,{as:"h3"},t.inspectionsByEstablishmentidList.length," Inspections",r.a.createElement(o.a.Subheader,null,"Since 8-1-2016")),r.a.createElement(D,{data:t.inspectionsByEstablishmentidList}),r.a.createElement(h.a,{visible:!0,size:"small"},r.a.createElement(h.a.Header,null,"About this data"),"A restaurant is"," ",r.a.createElement("strong",null,"compliant")," ",r.a.createElement(d.a,{name:"check",color:"green"}),"when zero Priority or Priority Foundation violations are found during an inspection or when all Priority and Priority Foundation violations are corrected; Core violations are not required to be corrected. To learn more about individual violations cited, reference Michigan's Food Code ",r.a.createElement("a",{href:k.foodCodeLink},"here"),".")))};var P="2225937195"},157:function(e,t,a){"use strict";a.d(t,"b",function(){return d});var n=a(0),r=a.n(n),o=a(4),i=a.n(o),l=a(32),s=a.n(l);a.d(t,"a",function(){return s.a});a(163);var c=r.a.createContext({}),d=function(e){return r.a.createElement(c.Consumer,null,function(t){return e.data||t[e.query]&&t[e.query].data?(e.render||e.children)(e.data?e.data.data:t[e.query].data):r.a.createElement("div",null,"Loading (StaticQuery)")})};d.propTypes={data:i.a.object,query:i.a.string.isRequired,render:i.a.func,children:i.a.func}},163:function(e,t,a){var n;e.exports=(n=a(178))&&n.default||n},178:function(e,t,a){"use strict";a.r(t);a(35);var n=a(0),r=a.n(n),o=a(4),i=a.n(o),l=a(54),s=a(2),c=function(e){var t=e.location,a=s.default.getResourcesForPathnameSync(t.pathname);return r.a.createElement(l.a,Object.assign({location:t,pageResources:a},a.json))};c.propTypes={location:i.a.shape({pathname:i.a.string.isRequired}).isRequired},t.default=c},188:function(e){e.exports={data:{site:{siteMetadata:{title:"Detroit Restaurant Inspections"}}}}},189:function(e,t,a){"use strict";var n=a(188),r=a(0),o=a.n(r),i=a(4),l=a.n(i),s=a(157),c=function(e){var t=e.siteTitle;return o.a.createElement("header",{style:{borderBottom:"3px solid #feb70d",marginBottom:"1.45rem"}},o.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"1.45rem 1.0875rem"}},o.a.createElement("h1",{style:{margin:0}},o.a.createElement(s.a,{to:"/",style:{color:"black",textDecoration:"none",fontWeight:900}},t))))};c.propTypes={siteTitle:l.a.string},c.defaultProps={siteTitle:""};var d=c,m=(a(244),function(e){var t=e.children;return o.a.createElement(s.b,{query:"755544856",render:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(d,{siteTitle:e.site.siteMetadata.title}),o.a.createElement("div",{style:{margin:"0 auto",maxWidth:960,padding:"0px 1.0875rem 1.45rem",paddingTop:0}},o.a.createElement("main",null,t)))},data:n})});m.propTypes={children:l.a.node.isRequired};t.a=m}}]);
//# sourceMappingURL=component---src-templates-establishment-page-js-6c8ec2767379b30d774b.js.map