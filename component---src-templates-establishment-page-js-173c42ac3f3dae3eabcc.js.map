{"version":3,"sources":["webpack:///./src/components/violation.js","webpack:///./src/data/metadata.js","webpack:///./src/components/inspection.js","webpack:///./src/templates/establishment-page.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/header.js","webpack:///./src/components/layout.js"],"names":["Violation","_ref","data","react_default","a","createElement","Item","Content","Header","as","violationCode","Meta","itemDescription","_","lowerCase","subItem","problemDescription","subProblem","Popup","wide","size","trigger","Icon","circular","name","color","header","content","violationDescription","Extra","Label","violationType","corrected","format","correctedDate","metadata","outcomes","Yes","No","violations","Priority","Foundation","Core","risks","High","Medium","Low","null","inspections","Routine inspection","Complaint","Pre-opening / Plan review","establishments","disclaimer","foodCodeLink","contact","Inspection","state","activeIndex","handleClick","e","titleProps","index","newIndex","_this","setState","render","_this2","this","Accordion","fluid","styled","props","map","i","key","Title","active","onClick","style","display","flexDirection","justifyContent","alignItems","inspectionDate","Subheader","inspectionType","inCompliance","Table","basic","celled","Body","Row","className","Cell","marginLeft","violationsByInspectionidList","length","Group","divided","verticalAlign","violation","Component","__webpack_exports__","postgres","establishment","json","type","geometry","geojson","properties","description","marker-symbol","marker-color","fill-opacity","encoded","encodeURIComponent","JSON","stringify","layout","address","Divider","Container","establishmentType","striped","establishmentStatus","licenseType","licenseNumber","owner","riskCategory","Math","round","reviewFrequencyDays","inspectionsByEstablishmentidList","inspection","Message","visible","href","Grid","columns","stackable","textAlign","Column","Image","rounded","floated","src","coords","List","relaxed","nearbyList","establishmentid","gatsby_browser_entry","to","Description","query","__webpack_require__","d","StaticQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","StaticQueryContext","React","createContext","Consumer","staticQueryData","children","propTypes","PropTypes","object","string","isRequired","func","m","module","exports","require","default","ProdPageRenderer","location","pageResources","loader","getResourcesForPathnameSync","pathname","InternalPageRenderer","Object","assign","shape","siteTitle","borderBottom","marginBottom","margin","maxWidth","padding","textDecoration","fontWeight","defaultProps","Layout","Fragment","site","siteMetadata","title","paddingTop","_755544856","node"],"mappings":"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","file":"component---src-templates-establishment-page-js-173c42ac3f3dae3eabcc.js","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport { format } from 'date-fns';\nimport { Item, Label, Icon, Popup, Header } from 'semantic-ui-react';\n\nconst Violation = ({ data }) => {\n  return (\n    <Item>\n      <Item.Content>\n        <Header as='h5'>Code {data.violationCode}</Header>\n        <Item.Meta>\n          {data.itemDescription} {_.lowerCase(data.subItem)} {_.lowerCase(data.problemDescription)} {_.lowerCase(data.subProblem)}\n          <Popup \n            wide \n            size='tiny' \n            trigger={<Icon circular name='plus' size='small' color='grey' />} \n            header='Full food code definition:' \n            content={data.violationDescription}\n          />\n        </Item.Meta>\n        <Item.Extra>\n          <Label color={data.violationType === \"Priority\" ? 'red' : data.violationType === \"Foundation\" ? 'orange' : 'yellow'}>\n            {data.violationType === \"Foundation\" ? \"Priority Foundation\" : data.violationType}\n          </Label>\n          <Label>\n            <Icon name={data.corrected === \"Yes\" ? 'check' : data.corrected === \"No\" ? 'times' : 'ban'} color={data.corrected === \"Yes\" ? 'green' : data.corrected === \"No\" ? 'red' : 'grey'} />\n            {data.corrected === \"Yes\" ? `Corrected on ${format(data.correctedDate, 'M-D-YY')}` : data.corrected === \"No\" ? \"Not corrected\" : data.corrected}\n          </Label>\n        </Item.Extra>\n      </Item.Content>\n    </Item>\n  );\n}\n\nexport default Violation;\n","const metadata = {\n    \"outcomes\": {\n      \"Yes\": \"An establishment is compliant when zero Priority or Priority Foundation violations are cited or when all Priority and Priority violations are corrected.\",\n      \"No\": \"An establishment is not compliant when Priority or Priority Foundation violations are not corrected.\"\n    },\n  \n    \"violations\": {\n      \"Priority\": \"Priority violations are the most serious category and directly contribute to foodborne illness or food poisoning. Examples include ...\",\n      \"Foundation\": \"Priority Foundation violations are the second most serious category and indirectly contribute to foodborne illness or food poisoning. Examples include not having a food product thermometer or no paper towel at the hand sink.\",\n      \"Core\": \"Core violations are the least serious category and do not significantly contribute to foodborne illness or food poisoning, but are violations of other legal requirements. Examples include a dirty floor or a dirty dumpster area.\"\n    },\n  \n    \"risks\": {\n      \"High\": \"Complexity level is based on an establishment's food preparation; more complex food preparation increases risk and results in a more frequent review schedule. High indicates very complex food preparation, such as full service restaurants.\",\n      \"Medium\": \"Complexity level is based on an establishment's food preparation; more complex food preparation increases risk and results in a more frequent review schedule. Medium indicates moderately complex food preparation, such as hamburger fast food chains and bars that serve food.\",\n      \"Low\": \"Complexity level is based on an establishment's food preparation; more complex food preparation increases risk and results in a more frequent review schedule. Low indicates very limited food preparation, such as a coffee shops or bars that only serve beverages.\",\n      \"null\": \"Complexity level is based on an establishment's food preparation; more complex food preparation increases risk and results in a more frequent review schedule. This is a new field that is in the process of being updated by the Detroit Health Department.\"\n    },\n  \n    \"inspections\": {\n      \"Routine inspection\": \"\",\n      \"Complaint\": \"\",\n      \"Pre-opening / Plan review\": \"\"\n    },\n  \n    \"establishments\": \"This data includes restaurants and other food service establishments, like school cafeterias or stadium concessions, that are inspected by the Detroit Health Department (DHD). Grocery stores, convenience stores, and other packaged and raw food establishments are inspected by the Michigan Department of Agriculture and Rural Development (MDARD) and are not included here.\",\n    \n    \"disclaimer\": \"If a restaurant, bar, or other food service establishment that prepares or serves food and beverages in Detroit is not found in this data, please email foodsafety@detroitmi.gov or call 313-876-0135 for follow up. Please include the name and address of the establishment, and the date and time of your visit in your message.\",\n    \n    \"foodCodeLink\": \"https://www.michigan.gov/documents/mdard/MI_Modified_2009_Food_Code_396675_7.pdf\",\n    \n    \"contact\": \"foodsafety@detroitmi.gov\"\n  };\n  \n  export default metadata;","import React, { Component } from 'react';\nimport { format } from 'date-fns';\nimport { Accordion, Icon, Header, Popup, Item, Table } from 'semantic-ui-react';\n\nimport Violation from './violation';\nimport metadata from '../data/metadata';\n\nclass Inspection extends Component {\n  state = { \n    activeIndex: null \n  };\n\n  handleClick = (e, titleProps) => {\n    const { index } = titleProps;\n    const { activeIndex } = this.state;\n    const newIndex = activeIndex === index ? -1 : index;\n\n    this.setState({ \n      activeIndex: newIndex \n    });\n  }\n\n  render() {\n    const { activeIndex } = this.state;\n\n    return (\n      <Accordion fluid styled>\n        {this.props.data.map((e, i) => (\n          <div key={i}>\n            <Accordion.Title active={activeIndex === i} index={i} onClick={this.handleClick} style={{ display: 'flex', flexDirection: 'vertical', justifyContent: 'space-between', alignItems: 'center' }}>\n              <Header as='h4'>\n                {format(e.inspectionDate, 'M-D-YYYY')}\n                <Header.Subheader>\n                  {e.inspectionType + ' '}\n                  <Icon name={e.inCompliance === \"Yes\" ? 'check' : e.inCompliance === \"No\" ? 'times' : null} color={e.inCompliance === \"Yes\" ? 'green' : 'red'} />\n                </Header.Subheader>\n              </Header>\n              <Icon name='dropdown' />\n            </Accordion.Title>\n            <Accordion.Content active={activeIndex === i}>\n              <Table basic='very' celled>\n                <Table.Body>\n                  <Table.Row className={e.inCompliance === \"Yes\" ? 'positive' : e.inCompliance === \"No\" ? 'negative' : ''}>\n                    <Table.Cell>\n                      <strong>Outcome</strong>\n                    </Table.Cell>\n                    <Table.Cell>\n                      {e.inCompliance === \"Yes\" ? \"Compliant\" : e.inCompliance === \"No\" ? \"Not compliant\" : e.inCompliance}\n                      <span style={{ marginLeft: '.5em' }}>\n                        <Popup wide size='tiny' trigger={<Icon circular name='question' size='small' color='grey' />}>\n                          {metadata.outcomes[`${e.inCompliance}`]}\n                        </Popup>\n                      </span>\n                    </Table.Cell>\n                  </Table.Row>\n                </Table.Body>\n              </Table>\n              <Header as='h5'>\n                {e.violationsByInspectionidList.length} {e.violationsByInspectionidList.length === 1 ? 'violation' : 'violations'} cited {e.violationsByInspectionidList.length > 0 ? ':' : null}\n              </Header>\n              {e.violationsByInspectionidList.length > 0 ? \n                <Item.Group divided verticalAlign='middle'>\n                  {e.violationsByInspectionidList.map((e, i) => (\n                    <Violation data={e} key={i} />\n                  ))}\n                </Item.Group>\n              : `` }\n            </Accordion.Content>\n          </div>\n        ))}\n      </Accordion>\n    );\n  }\n}\n\nexport default Inspection;\n","import React from \"react\"\nimport { graphql, Link } from \"gatsby\"\nimport {\n  Header,\n  Container,\n  Table,\n  Divider,\n  Icon,\n  Message,\n  Popup,\n  List,\n  Image,\n  Grid,\n} from \"semantic-ui-react\"\n\nimport Inspection from \"../components/inspection\"\nimport Layout from \"../components/layout\"\nimport metadata from \"../data/metadata\"\n\nexport default ({ data }) => {\n  const e = data.postgres.establishment[0]\n\n  let json = {\n    type: \"Feature\",\n    geometry: e.geojson.geometry,\n    properties: {\n      description: \"this\",\n      \"marker-symbol\": \"restaurant\",\n      \"marker-color\": \"#ace\",\n      \"fill-opacity\": 0.8,\n    },\n  }\n  let encoded = encodeURIComponent(JSON.stringify(json))\n\n  return (\n    <Layout>\n      <Header as=\"h2\">\n        {e.name}\n        <Header.Subheader>{e.address}</Header.Subheader>\n      </Header>\n      <Divider />\n      <Container fluid>\n        <Header as=\"h3\">{e.establishmentType}</Header>\n        <Table basic=\"very\" celled striped>\n          <Table.Body>\n            <Table.Row className={e.establishmentStatus === \"Open\" ? \"positive\" : \"\"}>\n              <Table.Cell>\n                <strong>Status</strong>\n              </Table.Cell>\n              <Table.Cell>\n                {!e.establishmentStatus ? \"Unknown\" : e.establishmentStatus}\n              </Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell>\n                <strong>License type</strong>\n              </Table.Cell>\n              <Table.Cell>{e.licenseType}</Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell>\n                <strong>State license number</strong>\n              </Table.Cell>\n              <Table.Cell>{e.licenseNumber}</Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell>\n                <strong>Owner</strong>\n              </Table.Cell>\n              <Table.Cell>{e.owner}</Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell>\n                <strong>Complexity level</strong>\n              </Table.Cell>\n              <Table.Cell>\n                {!e.riskCategory ? \"Unknown\" : e.riskCategory}\n                <span style={{ marginLeft: \".5em\" }}>\n                  <Popup\n                    wide\n                    size=\"tiny\"\n                    trigger={\n                      <Icon\n                        circular\n                        name=\"question\"\n                        size=\"small\"\n                        color=\"grey\"\n                      />\n                    }\n                  >\n                    {metadata.risks[`${e.riskCategory}`]}\n                  </Popup>\n                </span>\n              </Table.Cell>\n            </Table.Row>\n            <Table.Row>\n              <Table.Cell>\n                <strong>Review frequency</strong>\n              </Table.Cell>\n              <Table.Cell>\n                {Math.round(e.reviewFrequencyDays) === 0\n                  ? `Unknown`\n                  : `Every ${Math.round(e.reviewFrequencyDays)} days`}\n              </Table.Cell>\n            </Table.Row>\n          </Table.Body>\n        </Table>\n      </Container>\n      <Divider />\n      <Container fluid>\n        <Header as=\"h3\">\n          {e.inspectionsByEstablishmentidList.length} Inspections\n          <Header.Subheader>Since 8-1-2016</Header.Subheader>\n        </Header>\n        <Inspection data={e.inspectionsByEstablishmentidList} />\n        <Message visible size=\"small\">\n          <Message.Header>About this data</Message.Header>A restaurant is{\" \"}\n          <strong>compliant</strong> <Icon name=\"check\" color=\"green\" />\n          when zero Priority or Priority Foundation violations are found during\n          an inspection or when all Priority and Priority Foundation violations\n          are corrected; Core violations are not required to be corrected. To\n          learn more about individual violations cited, reference Michigan's\n          Food Code <a href={metadata.foodCodeLink}>here</a>.\n        </Message>\n      </Container>\n      <Divider />\n      <Container fluid>\n        <Header as=\"h3\">\n          Location\n          <Header.Subheader>{e.address}</Header.Subheader>\n        </Header>\n        <Grid columns={2} stackable textAlign=\"center\">\n          <Grid.Row>\n            <Grid.Column>\n              <Image\n                rounded\n                floated=\"right\"\n                src={`https://api.mapbox.com/styles/v1/jmcbroom/cjsunv74q0t5a1fmo902wmiq0/static/geojson(${encoded})/${\n                  e.coords\n                },15.9,0,0/400x300@2x?access_token=pk.eyJ1Ijoiam1jYnJvb20iLCJhIjoianRuR3B1NCJ9.cePohSx5Od4SJhMVjFuCQA`}\n              />\n            </Grid.Column>\n            <Grid.Column textAlign=\"left\">\n              <Header as=\"h3\">Nearby</Header>\n              <List divided relaxed size='large'>\n                {e.nearbyList.map(i => (\n                  <List.Item key={i.establishmentid}>\n                    <List.Content>\n                      <Link to={`/establishment/${i.establishmentid}`}>\n                        <List.Header as='a'>{i.name}</List.Header>\n                        <List.Description>{i.address}</List.Description>\n                      </Link>\n                    </List.Content>\n                  </List.Item>\n                ))}\n              </List>\n            </Grid.Column>\n          </Grid.Row>\n        </Grid>\n      </Container>\n    </Layout>\n  )\n}\n\nexport const query = graphql`\n  query($eid: String!) {\n    postgres {\n      establishment: allEstablishmentsList(\n        condition: { establishmentid: $eid }\n      ) {\n        establishmentid\n        name\n        address\n        owner\n        licenseNumber\n        licenseType\n        establishmentType\n        establishmentStatus\n        riskCategory\n        reviewFrequencyDays\n        coords\n        geojson\n        nearbyList(first: 5) {\n          establishmentid\n          name\n          address\n        }\n        inspectionsByEstablishmentidList {\n          inspectionid\n          inspectionDate\n          inspectionType\n          inCompliance\n          violationsByInspectionidList(orderBy: VIOLATION_TYPE_DESC) {\n            violationCode\n            violationDescription\n            violationType\n            itemDescription\n            subItem\n            problemDescription\n            subProblem\n            location\n            subLocation\n            corrected\n            daysToCorrect\n            correctedDate\n            correctionDescription\n          }\n        }\n      }\n    }\n  }\n`\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n  parsePath,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nconst useStaticQuery = query => {\n  if (\n    typeof React.useContext !== `function` &&\n    process.env.NODE_ENV === `development`\n  ) {\n    throw new Error(\n      `You're likely using a version of React that doesn't support Hooks\\n` +\n        `Please update React and ReactDOM to 16.8.0 or later to use the useStaticQuery hook.`\n    )\n  }\n  const context = React.useContext(StaticQueryContext)\n  if (context[query] && context[query].data) {\n    return context[query].data\n  } else {\n    throw new Error(\n      `The result of this StaticQuery could not be fetched.\\n\\n` +\n        `This is likely a bug in Gatsby and if refreshing the page does not fix it, ` +\n        `please open an issue in https://github.com/gatsbyjs/gatsby/issues`\n    )\n  }\n}\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n  useStaticQuery,\n}\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import { Link } from \"gatsby\"\nimport PropTypes from \"prop-types\"\nimport React from \"react\"\n\nconst Header = ({ siteTitle }) => (\n  <header\n    style={{\n      borderBottom: `3px solid #feb70d`,\n      marginBottom: `1.45rem`,\n    }}\n  >\n    <div\n      style={{\n        margin: `0 auto`,\n        maxWidth: 960,\n        padding: `1.45rem 1.0875rem`,\n      }}\n    >\n      <h1 style={{ margin: 0 }}>\n        <Link\n          to=\"/\"\n          style={{\n            color: `black`,\n            textDecoration: `none`,\n            fontWeight: 900,\n          }}\n        >\n          {siteTitle}\n        </Link>\n      </h1>\n    </div>\n  </header>\n)\n\nHeader.propTypes = {\n  siteTitle: PropTypes.string,\n}\n\nHeader.defaultProps = {\n  siteTitle: ``,\n}\n\nexport default Header\n","/**\n * Layout component that queries for data\n * with Gatsby's StaticQuery component\n *\n * See: https://www.gatsbyjs.org/docs/static-query/\n */\n\nimport React from \"react\"\nimport PropTypes from \"prop-types\"\nimport { StaticQuery, graphql } from \"gatsby\"\n\nimport Header from \"./header\"\n// import \"./layout.css\"\nimport 'semantic-ui-less/semantic.less'\n\nconst Layout = ({ children }) => (\n  <StaticQuery\n    query={graphql`\n      query SiteTitleQuery {\n        site {\n          siteMetadata {\n            title\n          }\n        }\n      }\n    `}\n    render={data => (\n      <>\n        <Header siteTitle={data.site.siteMetadata.title} />\n        <div\n          style={{\n            margin: `0 auto`,\n            maxWidth: 960,\n            padding: `0px 1.0875rem 1.45rem`,\n            paddingTop: 0,\n          }}\n        >\n          <main>{children}</main>\n        </div>\n      </>\n    )}\n  />\n)\n\nLayout.propTypes = {\n  children: PropTypes.node.isRequired,\n}\n\nexport default Layout\n"],"sourceRoot":""}